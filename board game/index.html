<!doctype html>
<html lang="eng">

<head>
        <title>Snakes & Ladders</title>
        <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>

        <div id='yeeter'>
                <p>CHOOSE AMOUNT OF PLAYERS MY DUDE</p>
        </div>


        <div id='starter_game'>
                <img src="images/start_game.png" id='start_button'>

        </div>

        <div id='choose_amount'>
                <button id="button_1" class="button button1">One Player</button>
                <button id="button_2" class="button button2">Two Player</button>
                <button id="button_3" class="button button3">Three Player</button>
                <button id="button_4" class="button button4">Four Player</button>
        </div>
        


        <div id='ITS_OVER'>
                <img src="images/game_over.gif" alt="Game Over" id="game">
                <img src="images/snake.gif" alt="Snake" id="snake">

        </div>


        <div id="end_button"><a href="index.html"><img src="images\PlayAgain.png"></a></div>


        <div id="BOARD" >

                <div id="myContainer" style="width: 570px; height: 570px;
                position: relative;  left: 3%; top: 3.5%; opacity: 100%;">
                <img id="player1" src="images/red.png"
                        style="position:absolute; left:0%; bottom: 0%; width:38.75px; height:38.75px;">
                <img id="player2" src="images/blue.png"
                        style="position:absolute; left:0%; bottom: 0%; width:38.75px; height:38.75px;">
                <img id="player3" src="images/green.png"
                        style="position:absolute; left:0%; bottom: 0%; width:38.75px; height:38.75px;">
                <img id="player4" src="images/yellow.png"
                        style="position:absolute; left:0%; bottom: 0%; width:38.75px; height:38.75px;">
        
                </div>
        </div>

        <div id="THE_DICES">
                <img src="images/1.png" id="dice1">
                <button id="button">roll dice</button>
                <img src='' id="character1">
                <img src='' id="character2">
                <img src='' id="character3">
                <img src='' id="character4">
        </div>

        <audio id="dice_sound" src="src/dice_roll.wav"></audio>

               
        <script>

                document.getElementById('starter_game').onclick = press_start
                document.getElementById('yeeter').style.display='none'
                document.getElementById('choose_amount').style.display='none'
                document.getElementById('BOARD').style.display ='none'
                document.getElementById('THE_DICES').style.display ='none'
                document.getElementById('ITS_OVER').style.display='none'
                document.getElementById('end_button').style.display='none'
                amount_playing = 0
                let array1 = []
                let array2 = []
                let tile = 1
                player_num = 0
                player_dict = {0: 1, 1: 1, 2: 1}
                loopy = {0:'player1', 1:'player2', 2:'player3'}
                vert_pos_dict = {0 : -530, 1: -530, 2:-530}
                hor_pos_dict = {0: 0, 1 :0, 2:0}

                //this function allows user to choose the amount of players
                function press_start() {
                        document.getElementById('starter_game').style.display='none'
                        document.getElementById('choose_amount').style.display='initial'
                        document.getElementById('yeeter').style.display='initial'
                        document.getElementById('button_1').onclick = selected_1
                        document.getElementById('button_2').onclick = selected_2
                        document.getElementById('button_3').onclick = selected_3
                        document.getElementById('button_4').onclick = selected_4
                }

                //this function is is called when user chooses one player, makes player dict have 1
                function selected_1() {
                        document.getElementById('choose_amount').style.display='none'
                        document.getElementById('yeeter').style.display='none'
                        document.getElementById('BOARD').style.display='initial'
                        document.getElementById('player2').style.display='none'
                        document.getElementById('player3').style.display='none'
                        document.getElementById('player4').style.display='none'
                        document.getElementById('THE_DICES').style.display ='initial'
                        player_dict = {0: 1}
                        loopy = {0:'player1'}
                        vert_pos_dict = {0 : -530}
                        hor_pos_dict = {0: 0}
                        amount_playing = 0
                }

                //this function is is called when user chooses two players, makes player dict have 2
                function selected_2() {
                        document.getElementById('choose_amount').style.display='none'
                        document.getElementById('yeeter').style.display='none'
                        document.getElementById('BOARD').style.display='initial'
                        document.getElementById('player3').style.display='none'
                        document.getElementById('player4').style.display='none'
                        document.getElementById('THE_DICES').style.display ='initial'
                        player_dict = {0: 1, 1: 1}
                        loopy = {0:'player1', 1:'player2'}
                        vert_pos_dict = {0 : -530, 1 : -530}
                        hor_pos_dict = {0: 0, 1: 0}
                        amount_playing = 1
                }

                //this function is is called when user chooses three player, makes player dict have 3
                function selected_3() {
                        document.getElementById('choose_amount').style.display='none'
                        document.getElementById('yeeter').style.display='none'
                        document.getElementById('BOARD').style.display='initial'
                        document.getElementById('player4').style.display='none'
                        document.getElementById('THE_DICES').style.display ='initial'
                        player_dict = {0: 1, 1: 1, 2: 1}
                        loopy = {0:'player1', 1:'player2', 2:'player3'}
                        vert_pos_dict = {0 : -530, 1 : -530, 2 : -530}
                        hor_pos_dict = {0: 0, 1: 0, 2: 0}
                        amount_playing = 2
                }

                //this function is is called when user chooses four player, makes player dict have 4
                function selected_4() {
                        document.getElementById('choose_amount').style.display='none'
                        document.getElementById('yeeter').style.display='none'
                        document.getElementById('BOARD').style.display='initial'
                        document.getElementById('THE_DICES').style.display ='initial'
                        player_dict = {0: 1, 1: 1, 2: 1, 3: 1}
                        loopy = {0:'player1', 1:'player2', 2:'player3', 3:'player4'}
                        vert_pos_dict = {0 : -530, 1 : -530, 2 : -530, 3 : -530}
                        hor_pos_dict = {0: 0, 1: 0, 2: 0, 3: 0}
                        amount_playing = 3
                }

                //this function rolls the dice and adds to an array, we get the final nuber from the array ad clear it to get an animation and sum
                function dice_roll() {
                        let audio = document.getElementById("dice_sound");
                        audio.play();
                        dice_one = random(1, 7)
                        if (dice_one == 1) {
                                document.getElementById("dice1").src = "images/1.png";
                        } else if (dice_one == 2) {
                                document.getElementById("dice1").src = "images/2.png";
                        } else if (dice_one == 3) {
                                document.getElementById("dice1").src = "images/3.png";
                        } else if (dice_one == 4) {
                                document.getElementById("dice1").src = "images/4.png";
                        } else if (dice_one == 5) {
                                document.getElementById("dice1").src = "images/5.png";
                        } else if (dice_one == 6) {
                                document.getElementById("dice1").src = "images/6.png";
                        }
                        array1.push(dice_one)
                }

                //this function clears array so that there is not a lot in the array. idk if this really helps but i dont like having the array very long, there are many other ways to get the dice animiation and get the final number shown but i like this way because it works 
                function clear_arr() {
                        let array1 = []
                }

                //starts the animation for the dice
                function starter() {
                        start = setInterval(dice_roll, 10)
                }

                //stops the animation for the dice
                function stopper() {
                        clearInterval(start)
                }

                //reoves the click from the dice and stops the dice after a few seconds, gets the number of dice shown.
                function dice_roller() {
                        document.getElementById('button').removeEventListener("click", dice_roller)
                        document.getElementById('dice1').removeEventListener("click", dice_roller)
                        starter()
                        setTimeout(stopper, 2000)
                        setTimeout(dice_sum, 2001)
                }

                //this iterates the player numbers and adds allows user to click on dice again.
                function clicktime() {
                        document.getElementById("button").addEventListener("click", dice_roller)
                        document.getElementById("dice1").addEventListener("click", dice_roller)
                        player_num += 1
                }

                //just a randomizer function.
                function random(a, b) {
                        if (a < b) {
                                num1 = a
                                num2 = b
                        } else {
                                num1 = b
                                num2 = a
                        }
                        if (num1 < 0) {
                                number = (num1)
                        }
                        number = Math.floor((num1 + (num2 - num1) * Math.random()))
                        return number
                }

                //returns the dice amount shown and adds to the total tile of the player in the dictionary and checks if there is a winner (tile>100)
                function dice_sum() {
                        last_1 = array1[array1.length - 1]
                        console.log("dice 1 =", last_1)
                        sum = last_1 
                        console.log("total =", sum)
                        clear_arr()
                        if (player_num > amount_playing) {
                                player_num = 0
                        } if (player_num == 0) {
                                if (player_dict[0] <= 100) {
                                        player_dict[0] += sum
                                        tile = tile + sum
                                        console.log(player_dict)
                                        console.log('player 1 tile:', player_dict[0])
                                        playerMoverator(sum, player_dict[0], player_num)
                                }
                        } if (player_num == 1) {
                                if (player_dict[1] <= 100) {
                                        player_dict[1] += sum

                                        console.log(player_dict)
                                        console.log('player 2 tile:', player_dict[1])
                                        playerMoverator(sum, player_dict[1], player_num)
                                }
                        } if (player_num == 2) {
                                if (player_dict[2] <= 100) {
                                        player_dict[2] += sum

                                        console.log(player_dict)
                                        console.log('player 3 tile:', player_dict[2])
                                        playerMoverator(sum, player_dict[2], player_num)
                                }
                        }
                        if (player_num == 3) {
                                if (player_dict[3] <= 100) {
                                        player_dict[3] += sum

                                        console.log(player_dict)
                                        console.log('player 4 tile:', player_dict[3])
                                        playerMoverator(sum, player_dict[3], player_num)
                                }
                        }
                        let check = check_winner()
                        if (check == true) {
                                setTimeout(end_game, 5000)
                        }
                        return sum
                }

                //checks winner function, wait this function is actually useless and we forgot to remove it....
                function check_winner() {
                        if (player_num == 0) {
                                if (player_dict[0] >= 100) {
                                        console.log('PLAYER 1 IS THE WINNER')
                                        return true
                                }
                        }
                        if (player_num == 1) {
                                if (player_dict[1] >= 100) {
                                        console.log('PLAYER 2 IS THE WINNER')
                                        return true
                                }
                        }
                        if (player_num == 2) {
                                if (player_dict[2] >= 100) {
                                        console.log('PLAYER 3 IS THE WINNER')
                                        return true
                                }
                        }

                }

                //ends the game by removing the current board and shows the end screen
                function end_game() {
                        document.getElementById('BOARD').style.display ='none'
                        document.getElementById('THE_DICES').style.display ='none'
                        document.getElementById('ITS_OVER').style.display='initial'
                        document.getElementById('end_button').style.display='initial'
                }

                //checks if the user is on a snake or ladder, then moes by the amount
                function special_case() {
                        if (player_dict[player_num] == 2) {
                                player_dict[player_num] = 38
                                special_up(3, 10)
                                special_right(1, 30)
                                setTimeout(clicktime, 3000)
                        } else if (player_dict[player_num] == 4) {
                                player_dict[player_num] = 14
                                special_up(1, 30)
                                special_right(3, 10)
                                setTimeout(clicktime, 3000)
                        } else if (player_dict[player_num] == 9) {
                                player_dict[player_num] = 31
                                special_up(3, 10)
                                special_right(1, 30)
                                setTimeout(clicktime, 3000)
                        } else if (player_dict[player_num] == 33) {
                                player_dict[player_num] = 85
                                special_up(5, 10)
                                special_left(3, 16)
                                setTimeout(clicktime, 6000)
                        } else if (player_dict[player_num] == 52) {
                                player_dict[player_num] = 88
                                special_up(3, 10)
                                special_left(1, 30)
                                setTimeout(clicktime, 3000)
                        } else if (player_dict[player_num] == 80) {
                                player_dict[player_num] = 99
                                special_up(2, 10)
                                special_right(1, 20)
                                setTimeout(clicktime, 3000)
                        } else if (player_dict[player_num] == 98) {
                                player_dict[player_num] = 8
                                special_down(9, 10)
                                special_right(5, 18)
                                setTimeout(clicktime, 9000)
                        } else if (player_dict[player_num] == 92) {
                                player_dict[player_num] = 53
                                special_down(4, 10)
                                special_left(1, 40)
                                setTimeout(clicktime, 5000)
                        } else if (player_dict[player_num] == 62) {
                                player_dict[player_num] = 57
                                special_down(1, 20)
                                special_right(2, 10)
                                setTimeout(clicktime, 3000)
                        } else if (player_dict[player_num] == 56) {
                                player_dict[player_num] = 15
                                special_down(4, 10)
                                special_right(1, 40)
                                setTimeout(clicktime, 5000)
                        } else if (player_dict[player_num] == 51) {
                                player_dict[player_num] = 15
                                special_down(4, 10)
                                setTimeout(clicktime, 4000)
                         } else {
                                return 'True'
                        }
                }

                //this checks which row the player is at and moves right or left accordingly
                function playerMoverator(sum, tile, player_num) {
                        console.log(player_num, 'THIS IS THE PLAYER')
                        tile = tile % 10
                        if (vert_pos_dict[player_num] == -530) {
                                myMoveRight(sum, tile, player_num)
                                console.log('this is the 1st row')
                        }
                        if (vert_pos_dict[player_num] == -416) {
                                myMoveRight(sum, tile, player_num)
                                console.log('this is the 3rd row')
                        }
                        if (vert_pos_dict[player_num] == -302) {
                                myMoveRight(sum, tile, player_num)
                                console.log('this is the 5th row')
                        }
                        if (vert_pos_dict[player_num] == -188) {
                                myMoveRight(sum, tile, player_num)
                                console.log('this is the 7th row')
                        }
                        if (vert_pos_dict[player_num] == -74) {
                                myMoveRight(sum, tile, player_num)
                                console.log('this is the 9th row')
                        }
                        if (vert_pos_dict[player_num] == -473) {
                                myMoveLeft(sum, tile, player_num)
                                console.log('this is the 2nd row')
                        }
                        if (vert_pos_dict[player_num] == -359) {
                                myMoveLeft(sum, tile, player_num)
                                console.log('this is the 4th row')
                        }
                        if (vert_pos_dict[player_num] == -245) {
                                myMoveLeft(sum, tile, player_num)
                                console.log('this is the 6th row')
                        }
                        if (vert_pos_dict[player_num] == -131) {
                                myMoveLeft(sum, tile, player_num)
                                console.log('this is the 8th row')
                        }
                        if (vert_pos_dict[player_num] == -17) {
                                myMoveLeft(sum, tile, player_num)
                                console.log('this is the 10th row')
                        } 
                }

                //this is the main function to move player right, then up and left if there is left over numbers. 
                function myMoveRight(sum, tenth, player) {
                        var elem = document.getElementById(loopy[player]);
                        var right_num = 0
                        var right_num = (sum * 57) + hor_pos_dict[player] ;
                        var id = setInterval(frame, 10);
                        function frame() {
                                if (hor_pos_dict[player] == right_num) {
                                        clearInterval(id);
                                        let yes = special_case()
                                        if (yes == 'True') {
                                                clicktime()
                                        }
                                } else if (hor_pos_dict[player] == 540) {
                                        
                                        clearInterval(id)
                                        var lefter = tenth - 1
                                        
                                        if (tenth > 0) {
                                                myMoveUp(player, lefter, tenth)     
                                        }
                                } else {
                                hor_pos_dict[player]++;

                                elem.style.left = hor_pos_dict[player] + 'px';
                                }
                        }
                }

                //this is the main function to move player left, then up and right if there are left over numbers. also calls special case functions to check
                function myMoveLeft(sum, tenth, player) {
                        var elem = document.getElementById(loopy[player]);
                        var left_num = hor_pos_dict[player] - (sum * 57);
                        var id = setInterval(frame, 10);
                        function frame() {
                                if (hor_pos_dict[player] == left_num) {
                                        clearInterval(id)
                                        let yes = special_case()
                                        if (yes == 'True') {
                                                clicktime()
                                        }      
                                } else if (hor_pos_dict[player] == 0) {
                                        clearInterval(id)
                                        var righter = tenth - 1
                                        if (hor_pos_dict[player] == 0 && vert_pos_dict[player] == -17) {
                                        clearInterval(id)
                                        }
                                        else if (tenth > 0) {
                                                myMoveUpOnce(player, righter, tenth)
                                        }
                                }
                                 else {
                                        hor_pos_dict[player]--;
                                        elem.style.left = hor_pos_dict[player] + 'px';
                                }
                        }
                }

                //wait we dont even use this fucntion LUL
                function myMoveDown() {
                        var elem = document.getElementById("player");
                        var down_num = (original_pos_vert - 35)
                        var id = setInterval(frame, 10);
                        function frame() {
                                if (original_pos_vert == down_num) {
                                        clearInterval(id);
                                } else {
                                        original_pos_vert--;
                                        elem.style.top = (original_pos_vert * -1) + 'px';
                                }
                        }
                }

                //main move up function , ends interval after moved 1 tile. then move left
                function myMoveUp(player, lefter, tenth) {
                        var elem = document.getElementById(loopy[player]);
                        var up_num = (vert_pos_dict[player] + 57)
                        var id_up = setInterval(frame, 10);
                        function frame() {
                                if (vert_pos_dict[player] == up_num) {
                                        clearInterval(id_up);
                                        myMoveLeft(lefter, tenth, player)      
                                } else {

                                        vert_pos_dict[player]++;

                                        elem.style.top = (vert_pos_dict[player] * -1) + 'px';
                                }
                        }
                }

                // same as the function above but i did it in a seperate function because if u called the other one twice there was a weird bug, having a seperate function fixed it idky LOL
                function myMoveUpOnce(player, righter, tenth) {
                        var elem = document.getElementById(loopy[player]);
                        var up_num = (vert_pos_dict[player] + 57)
                        var id_up = setInterval(frame, 10);
                        function frame() { 
                                if (vert_pos_dict[player] == up_num) {
                                        clearInterval(id_up);
                                        myMoveRight(righter, tenth, player)      
                                } else {
                                        vert_pos_dict[player]++;
                                        elem.style.top = (vert_pos_dict[player] * -1) + 'px';
                                }
                        }
                }

                //up function for the special case.
                function special_up(num, time) {
                        let elem = document.getElementById(loopy[player_num])
                        let upper = (vert_pos_dict[player_num] + 57*(num))
                        let spec_up = setInterval(frame, time);
                        function frame() {
                                if (vert_pos_dict[player_num] == upper) {
                                        clearInterval(spec_up)
                                } else {
                                        vert_pos_dict[player_num]++;
                                        elem.style.top = (vert_pos_dict[player_num] * -1) + 'px';
                                }
                        }
                }

                //down function for the special case
                function special_down(num, time) {
                        let elem = document.getElementById(loopy[player_num])
                        let downer = (vert_pos_dict[player_num] - (num * 57))
                        let spec_up = setInterval(frame, time);
                        function frame() {
                                if (vert_pos_dict[player_num] == downer) {
                                        clearInterval(spec_up)
                                } else {
                                        vert_pos_dict[player_num]--;
                                        elem.style.top = (vert_pos_dict[player_num] * -1) + 'px';
                                }
                        }
                }
                
                //right function for thr special case
                function special_right(num, time) {
                        let elem = document.getElementById(loopy[player_num])
                        let righty = (num * 57) + hor_pos_dict[player_num]
                        let spec_right = setInterval(frame, time);
                        function frame() {
                                if (hor_pos_dict[player_num] == righty) {
                                        clearInterval(spec_right)
                                } else {
                                        hor_pos_dict[player_num]++;
                                        elem.style.left = (hor_pos_dict[player_num]) + 'px';
                                }
                        }
                }

                //left function for the special case..
                function special_left(num, time) {
                        let elem = document.getElementById(loopy[player_num])
                        let lefty = hor_pos_dict[player_num] - (num * 57)
                        let spec_left = setInterval(frame, time);
                        function frame() {
                                if (hor_pos_dict[player_num] == lefty) {
                                        clearInterval(spec_left)
                                } else {
                                        hor_pos_dict[player_num]--;
                                        elem.style.left = (hor_pos_dict[player_num]) + 'px';
                                }
                        }
                }

                //function to interate player but i dont even think i ended up using this, i moved the iterator into the clicknum function LOL
                function player_iterate() {
                        player_num += 1
                }


                document.getElementById("button").addEventListener("click", dice_roller)
                document.getElementById("dice1").addEventListener("click", dice_roller)

        </script>
</body>

</html>




